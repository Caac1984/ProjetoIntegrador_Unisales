{"ast":null,"code":"import BarraNavegacao from \"@/components/BarraNavegacao.vue\";\nimport AuthService from \"@/services/AuthService\";\nexport default {\n  components: {\n    BarraNavegacao\n  },\n  data() {\n    return {\n      usuarios: [],\n      user: {\n        id: null,\n        login: null,\n        senha: null,\n        nome: null,\n        sobrenome: null,\n        periodo: null,\n        permissao: \"\"\n      },\n      registerActive: false,\n      emptyFields: false\n    };\n  },\n  mounted() {\n    this.getUsuarios();\n  },\n  methods: {\n    async getUsuarios() {\n      try {\n        const response = await fetch(\"http://localhost:8080/users\", {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${AuthService.dados.token}`\n          }\n        });\n        if (response.ok) {\n          this.usuarios = await response.json();\n          console.log(\"Usuários carregados:\", this.usuarios);\n        } else {\n          console.log(\"Erro ao buscar usuários\");\n        }\n      } catch (error) {\n        console.log(\"ERRO\", error);\n      }\n    },\n    async salvarOuAtualizar() {\n      if (this.user.login && this.user.senha) {\n        if (this.user.id) {\n          await this.atualizar();\n        } else {\n          await this.salvar();\n        }\n      } else {\n        this.emptyFields = true;\n      }\n    },\n    async salvar() {\n      try {\n        console.log(\"Salvando usuário:\", this.user);\n        const response = await fetch(\"http://localhost:8080/users\", {\n          method: \"POST\",\n          body: JSON.stringify(this.user),\n          headers: {\n            Authorization: `Bearer ${AuthService.dados.token}`,\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        if (response.ok) {\n          console.log(\"Usuário salvo com sucesso\");\n          await this.getUsuarios();\n          this.resetForm();\n        } else {\n          const errorData = await response.json();\n          console.log(\"Erro ao salvar usuário\", errorData);\n        }\n      } catch (error) {\n        console.log(\"ERRO\", error);\n      }\n    },\n    async atualizar() {\n      try {\n        console.log(\"Atualizando usuário:\", this.user);\n        const response = await fetch(`http://localhost:8080/users/${this.user.id}`, {\n          method: \"PUT\",\n          body: JSON.stringify({\n            nome: this.user.nome,\n            sobrenome: this.user.sobrenome,\n            periodo: this.user.periodo\n          }),\n          headers: {\n            Authorization: `Bearer ${AuthService.dados.token}`,\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        if (response.ok) {\n          console.log(\"Usuário atualizado com sucesso\");\n          await this.getUsuarios();\n          this.resetForm();\n        } else {\n          const errorData = await response.json();\n          console.log(\"Erro ao atualizar usuário\", errorData);\n        }\n      } catch (error) {\n        console.log(\"ERRO\", error);\n      }\n    },\n    carregarUsuario(usuario) {\n      console.log(\"Carregando usuário:\", usuario);\n      this.user = {\n        ...usuario\n      };\n      this.user.senha = \"\"; // Reset the password field for security reasons\n    },\n    resetForm() {\n      console.log(\"Redefinindo formulário\");\n      this.user = {\n        id: null,\n        login: null,\n        senha: null,\n        nome: null,\n        sobrenome: null,\n        periodo: null,\n        permissao: \"\"\n      };\n    }\n  }\n};","map":{"version":3,"names":["BarraNavegacao","AuthService","components","data","usuarios","user","id","login","senha","nome","sobrenome","periodo","permissao","registerActive","emptyFields","mounted","getUsuarios","methods","response","fetch","method","headers","Authorization","dados","token","ok","json","console","log","error","salvarOuAtualizar","atualizar","salvar","body","JSON","stringify","resetForm","errorData","carregarUsuario","usuario"],"sources":["/home/nomade00/Área de Trabalho/Projeto-Aplicacao-Hibrida-main/demomongosec-master/frontend/src/views/usuarios/UsuariosView.vue"],"sourcesContent":["<template>\n  <barra-navegacao></barra-navegacao>\n\n  <div class=\"cadastro\">\n    <div class=\"row g-0 justify-content-center\">\n      <div class=\"col-lg-9 col-md-6 col-sm-8\">\n        <div v-if=\"!registerActive\" class=\"card login\" v-bind:class=\"{ error: emptyFields }\">\n          <h1>Usuários:</h1>\n\n          <fieldset>\n            <legend>Cadastro:</legend>\n            <form @submit.prevent=\"salvarOuAtualizar\">\n              <fieldset>\n                <div class=\"row gx-3 gy-2 align-items-center p-2\">\n                  <div class=\"col-sm-4 form-group\">\n                    <input v-model=\"user.login\" type=\"text\" class=\"form-control\" placeholder=\"Login\" required>\n                  </div>\n                  <div class=\"col-sm-4\">\n                    <input v-model=\"user.senha\" type=\"password\" class=\"form-control\" placeholder=\"Senha\" required>\n                  </div>\n                </div>\n                <div class=\"row gx-3 gy-2 align-items-center p-2\">\n                  <div class=\"col-sm-4\">\n                    <input v-model=\"user.nome\" type=\"text\" class=\"form-control\" placeholder=\"Nome\" required>\n                  </div>\n                  <div class=\"col-sm-4\">\n                    <input v-model=\"user.sobrenome\" type=\"text\" class=\"form-control\" placeholder=\"Sobrenome\" required>\n                  </div>\n                </div>\n                <div class=\"row gx-3 gy-2 align-items-center p-2\">\n                  <div class=\"col-sm-4\">\n                    <input v-model=\"user.periodo\" type=\"text\" class=\"form-control\" placeholder=\"Período\" required>\n                  </div>\n                  <div class=\"col-sm-8 menu-drop\">\n                    <select v-model=\"user.permissao\" class=\"form-select\" aria-label=\"Permissões\">\n                      <option disabled value=\"\">Permissões:</option>\n                      <option value=\"ROLE_USER\">Usuário</option>\n                      <option value=\"ROLE_PROJETOS\">Projetos</option>\n                      <option value=\"ROLE_ADMIN\">Administrador</option>\n                    </select>\n                  </div>\n                </div>\n              </fieldset>\n              <div class=\"row gx-3 gy-2 col-sm-2 align-items-center p-4\">\n                <button type=\"submit\" class=\"btn btn-primary\">{{ user.id ? 'Atualizar' : 'Salvar' }}</button>\n              </div>\n            </form>\n          </fieldset>\n\n          <table class=\"table table-dark table-striped\">\n            <thead>\n              <tr>\n                <th>Login:</th>\n                <th>Nome:</th>\n                <th>Sobrenome:</th>\n                <th>Período:</th>\n                <th>Atualizar dados:</th>\n              </tr>\n            </thead>\n            <tbody class=\"table-group-divider\">\n              <tr v-for=\"(u, i) in usuarios\" :key=\"i\" @click=\"carregarUsuario(u)\">\n                <td>{{ u.login }}</td>\n                <td>{{ u.nome }}</td>\n                <td>{{ u.sobrenome }}</td>\n                <td>{{ u.periodo }}</td>\n                <td>\n                  <button class=\"btn btn-primary atualizar\" @click.stop=\"carregarUsuario(u)\">Atualizar</button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport BarraNavegacao from \"@/components/BarraNavegacao.vue\";\nimport AuthService from \"@/services/AuthService\";\n\nexport default {\n  components: {\n    BarraNavegacao,\n  },\n  data() {\n    return {\n      usuarios: [],\n      user: {\n        id: null,\n        login: null,\n        senha: null,\n        nome: null,\n        sobrenome: null,\n        periodo: null,\n        permissao: \"\",\n      },\n      registerActive: false,\n      emptyFields: false,\n    };\n  },\n  mounted() {\n    this.getUsuarios();\n  },\n  methods: {\n    async getUsuarios() {\n      try {\n        const response = await fetch(\"http://localhost:8080/users\", {\n          method: \"GET\",\n          headers: { Authorization: `Bearer ${AuthService.dados.token}` },\n        });\n        if (response.ok) {\n          this.usuarios = await response.json();\n          console.log(\"Usuários carregados:\", this.usuarios);\n        } else {\n          console.log(\"Erro ao buscar usuários\");\n        }\n      } catch (error) {\n        console.log(\"ERRO\", error);\n      }\n    },\n    async salvarOuAtualizar() {\n      if (this.user.login && this.user.senha) {\n        if (this.user.id) {\n          await this.atualizar();\n        } else {\n          await this.salvar();\n        }\n      } else {\n        this.emptyFields = true;\n      }\n    },\n    async salvar() {\n      try {\n        console.log(\"Salvando usuário:\", this.user);\n        const response = await fetch(\"http://localhost:8080/users\", {\n          method: \"POST\",\n          body: JSON.stringify(this.user),\n          headers: {\n            Authorization: `Bearer ${AuthService.dados.token}`,\n            \"Content-Type\": \"application/json\",\n          },\n        });\n        if (response.ok) {\n          console.log(\"Usuário salvo com sucesso\");\n          await this.getUsuarios();\n          this.resetForm();\n        } else {\n          const errorData = await response.json();\n          console.log(\"Erro ao salvar usuário\", errorData);\n        }\n      } catch (error) {\n        console.log(\"ERRO\", error);\n      }\n    },\n    async atualizar() {\n      try {\n        console.log(\"Atualizando usuário:\", this.user);\n        const response = await fetch(`http://localhost:8080/users/${this.user.id}`, {\n          method: \"PUT\",\n          body: JSON.stringify({\n            nome: this.user.nome,\n            sobrenome: this.user.sobrenome,\n            periodo: this.user.periodo,\n          }),\n          headers: {\n            Authorization: `Bearer ${AuthService.dados.token}`,\n            \"Content-Type\": \"application/json\",\n          },\n        });\n        if (response.ok) {\n          console.log(\"Usuário atualizado com sucesso\");\n          await this.getUsuarios();\n          this.resetForm();\n        } else {\n          const errorData = await response.json();\n          console.log(\"Erro ao atualizar usuário\", errorData);\n        }\n      } catch (error) {\n        console.log(\"ERRO\", error);\n      }\n    },\n    carregarUsuario(usuario) {\n      console.log(\"Carregando usuário:\", usuario);\n      this.user = { ...usuario };\n      this.user.senha = \"\"; // Reset the password field for security reasons\n    },\n    resetForm() {\n      console.log(\"Redefinindo formulário\");\n      this.user = {\n        id: null,\n        login: null,\n        senha: null,\n        nome: null,\n        sobrenome: null,\n        periodo: null,\n        permissao: \"\",\n      };\n    },\n  },\n};\n</script>\n\n<style scoped>\n.card {\n  padding: 20px;\n}\n\n.form-select {\n  width: 40%;\n  height: 38px;\n  font-size: 0.9em;\n  margin-left: 10px;\n}\n\n.form-control {\n  height: 30px;\n  font-size: 0.9em;\n  margin-left: 10px;\n}\n\n.form-group input {\n  margin-bottom: 20px !important;\n  border-radius: 10px !important;\n}\n\n.cadastro {\n  align-items: center;\n  display: flexbox;\n}\n\nbutton {\n  box-shadow: 1px 2px 1px 1px rgba(0, 0, 0, 0.745) !important;\n}\n\nbutton:hover {\n  color: black;\n  background-color: rgb(40, 232, 6);\n}\n\n.atualizar:hover {\n  background-color: yellow;\n}\n\n.menu-drop select {\n  font-size: 0.9em;\n  margin-left: 10px;\n  width: 49%;\n}\n\n@media only screen and (max-width: 768px) {\n  .menu-drop select {\n    width: 100%;\n  }\n}\n\ntable * {\n  border: solid 1px black;\n}\n\ntable tbody tr {\n  cursor: pointer;\n}\n</style>\n"],"mappings":"AA+EA,OAAOA,cAAa,MAAO,iCAAiC;AAC5D,OAAOC,WAAU,MAAO,wBAAwB;AAEhD,eAAe;EACbC,UAAU,EAAE;IACVF;EACF,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,IAAI,EAAE;QACJC,EAAE,EAAE,IAAI;QACRC,KAAK,EAAE,IAAI;QACXC,KAAK,EAAE,IAAI;QACXC,IAAI,EAAE,IAAI;QACVC,SAAS,EAAE,IAAI;QACfC,OAAO,EAAE,IAAI;QACbC,SAAS,EAAE;MACb,CAAC;MACDC,cAAc,EAAE,KAAK;MACrBC,WAAW,EAAE;IACf,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,WAAW,CAAC,CAAC;EACpB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,WAAWA,CAAA,EAAG;MAClB,IAAI;QACF,MAAME,QAAO,GAAI,MAAMC,KAAK,CAAC,6BAA6B,EAAE;UAC1DC,MAAM,EAAE,KAAK;UACbC,OAAO,EAAE;YAAEC,aAAa,EAAG,UAASrB,WAAW,CAACsB,KAAK,CAACC,KAAM;UAAE;QAChE,CAAC,CAAC;QACF,IAAIN,QAAQ,CAACO,EAAE,EAAE;UACf,IAAI,CAACrB,QAAO,GAAI,MAAMc,QAAQ,CAACQ,IAAI,CAAC,CAAC;UACrCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAACxB,QAAQ,CAAC;QACpD,OAAO;UACLuB,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;QACxC;MACF,EAAE,OAAOC,KAAK,EAAE;QACdF,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEC,KAAK,CAAC;MAC5B;IACF,CAAC;IACD,MAAMC,iBAAiBA,CAAA,EAAG;MACxB,IAAI,IAAI,CAACzB,IAAI,CAACE,KAAI,IAAK,IAAI,CAACF,IAAI,CAACG,KAAK,EAAE;QACtC,IAAI,IAAI,CAACH,IAAI,CAACC,EAAE,EAAE;UAChB,MAAM,IAAI,CAACyB,SAAS,CAAC,CAAC;QACxB,OAAO;UACL,MAAM,IAAI,CAACC,MAAM,CAAC,CAAC;QACrB;MACF,OAAO;QACL,IAAI,CAAClB,WAAU,GAAI,IAAI;MACzB;IACF,CAAC;IACD,MAAMkB,MAAMA,CAAA,EAAG;MACb,IAAI;QACFL,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAACvB,IAAI,CAAC;QAC3C,MAAMa,QAAO,GAAI,MAAMC,KAAK,CAAC,6BAA6B,EAAE;UAC1DC,MAAM,EAAE,MAAM;UACda,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC9B,IAAI,CAAC;UAC/BgB,OAAO,EAAE;YACPC,aAAa,EAAG,UAASrB,WAAW,CAACsB,KAAK,CAACC,KAAM,EAAC;YAClD,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;QACF,IAAIN,QAAQ,CAACO,EAAE,EAAE;UACfE,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;UACxC,MAAM,IAAI,CAACZ,WAAW,CAAC,CAAC;UACxB,IAAI,CAACoB,SAAS,CAAC,CAAC;QAClB,OAAO;UACL,MAAMC,SAAQ,GAAI,MAAMnB,QAAQ,CAACQ,IAAI,CAAC,CAAC;UACvCC,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAES,SAAS,CAAC;QAClD;MACF,EAAE,OAAOR,KAAK,EAAE;QACdF,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEC,KAAK,CAAC;MAC5B;IACF,CAAC;IACD,MAAME,SAASA,CAAA,EAAG;MAChB,IAAI;QACFJ,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAACvB,IAAI,CAAC;QAC9C,MAAMa,QAAO,GAAI,MAAMC,KAAK,CAAE,+BAA8B,IAAI,CAACd,IAAI,CAACC,EAAG,EAAC,EAAE;UAC1Ec,MAAM,EAAE,KAAK;UACba,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACnB1B,IAAI,EAAE,IAAI,CAACJ,IAAI,CAACI,IAAI;YACpBC,SAAS,EAAE,IAAI,CAACL,IAAI,CAACK,SAAS;YAC9BC,OAAO,EAAE,IAAI,CAACN,IAAI,CAACM;UACrB,CAAC,CAAC;UACFU,OAAO,EAAE;YACPC,aAAa,EAAG,UAASrB,WAAW,CAACsB,KAAK,CAACC,KAAM,EAAC;YAClD,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;QACF,IAAIN,QAAQ,CAACO,EAAE,EAAE;UACfE,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;UAC7C,MAAM,IAAI,CAACZ,WAAW,CAAC,CAAC;UACxB,IAAI,CAACoB,SAAS,CAAC,CAAC;QAClB,OAAO;UACL,MAAMC,SAAQ,GAAI,MAAMnB,QAAQ,CAACQ,IAAI,CAAC,CAAC;UACvCC,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAES,SAAS,CAAC;QACrD;MACF,EAAE,OAAOR,KAAK,EAAE;QACdF,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEC,KAAK,CAAC;MAC5B;IACF,CAAC;IACDS,eAAeA,CAACC,OAAO,EAAE;MACvBZ,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEW,OAAO,CAAC;MAC3C,IAAI,CAAClC,IAAG,GAAI;QAAE,GAAGkC;MAAQ,CAAC;MAC1B,IAAI,CAAClC,IAAI,CAACG,KAAI,GAAI,EAAE,EAAE;IACxB,CAAC;IACD4B,SAASA,CAAA,EAAG;MACVT,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;MACrC,IAAI,CAACvB,IAAG,GAAI;QACVC,EAAE,EAAE,IAAI;QACRC,KAAK,EAAE,IAAI;QACXC,KAAK,EAAE,IAAI;QACXC,IAAI,EAAE,IAAI;QACVC,SAAS,EAAE,IAAI;QACfC,OAAO,EAAE,IAAI;QACbC,SAAS,EAAE;MACb,CAAC;IACH;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}