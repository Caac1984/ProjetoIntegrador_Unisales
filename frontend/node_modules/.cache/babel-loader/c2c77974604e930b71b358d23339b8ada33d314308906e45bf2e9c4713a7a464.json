{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport BarraNavegacao from \"@/components/BarraNavegacao.vue\";\nimport AuthService from \"@/services/AuthService\";\nexport default {\n  components: {\n    BarraNavegacao\n  },\n  data() {\n    return {\n      usuarios: [],\n      user: {\n        login: null,\n        senha: null\n      }\n    };\n  },\n  mounted() {\n    console.log(AuthService.dados.token);\n    this.getUsuarios();\n  },\n  methods: {\n    async getUsuarios() {\n      try {\n        let r = await fetch(\"http://localhost:8080/users\", {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${AuthService.dados.token}`\n          }\n        });\n        r.json().then(j => {\n          this.usuarios = j;\n        });\n      } catch (ex) {\n        console.log(\"ERRO\", ex);\n      }\n    },\n    async salvar() {\n      this.user.permissoes = [\"ROLE_USER\"];\n      console.log(JSON.stringify(this.user));\n      if (this.user.login != null && this.user.senha != null) {\n        fetch(\"http://localhost:8080/users\", {\n          method: \"POST\",\n          body: JSON.stringify(this.user),\n          headers: {\n            Authorization: `Bearer ${AuthService.dados.token}`,\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(r => {\n          if (r.status != 200 || r.status != 201) {\n            r.json().then(j => {\n              console.log(\"ERRO\", j);\n            });\n          }\n          this.getUsuarios();\n        }).catch(e => {\n          console.log(\"ERRO\", e);\n        });\n      }\n    },\n    abreEdit(id) {\n      this.$router.push(`/usuarios/${id}`);\n    }\n  }\n};","map":{"version":3,"names":["BarraNavegacao","AuthService","components","data","usuarios","user","login","senha","mounted","console","log","dados","token","getUsuarios","methods","r","fetch","method","headers","Authorization","json","then","j","ex","salvar","permissoes","JSON","stringify","body","status","catch","e","abreEdit","id","$router","push"],"sources":["/home/nomade00/Área de Trabalho/Projeto-Aplicacao-Hibrida-main/demomongosec-master/frontend/src/views/usuarios/UsuariosView.vue"],"sourcesContent":["<template>\n <barra-navegacao></barra-navegacao>\n \n <h1>Usuários</h1>\n\n <fieldset>\n  <legend>Cadastro</legend>\n  <p><label>Login</label><input type=\"text\" v-model=\"user.login\" /></p>\n  <p><label>Senha</label><input type=\"password\" v-model=\"user.senha\" /></p>\n  <p><button @click=\"salvar\">Salvar</button></p>\n </fieldset>\n\n <table class=\"table table-dark table-sm\">\n  <thead>\n   <tr>\n    <th scope=\"col\">Id</th>\n    <th scope=\"col\">Login</th>\n    <th scope=\"col\">Permissões</th>\n   </tr>\n  </thead>\n  <tbody class=\"table-group-divider\">\n   <tr v-for=\"(u, i) in usuarios\" v-bind:key=\"i\" @click=\"abreEdit(u.id)\">\n    <td scope=\"row\">{{ u.id }}</td>\n    <td>{{ u.login }}</td>\n    <td>{{ u.permissoes.length }}</td>\n   </tr>\n  </tbody>\n </table>\n</template>\n\n<script>\nimport BarraNavegacao from \"@/components/BarraNavegacao.vue\";\nimport AuthService from \"@/services/AuthService\";\n\nexport default {\n components: {\n  BarraNavegacao,\n },\n data() {\n  return {\n   usuarios: [],\n   user: {\n    login: null,\n    senha: null,\n   },\n  };\n },\n mounted() {\n  console.log(AuthService.dados.token);\n  this.getUsuarios();\n },\n methods: {\n  async getUsuarios() {\n   try {\n    let r = await fetch(\"http://localhost:8080/users\", {\n     method: \"GET\",\n     headers: { Authorization: `Bearer ${AuthService.dados.token}` },\n    });\n    r.json().then((j) => {\n     this.usuarios = j;\n    });\n   } catch (ex) {\n    console.log(\"ERRO\", ex);\n   }\n  },\n  async salvar() {\n   this.user.permissoes = [\"ROLE_USER\"];\n   console.log(JSON.stringify(this.user));\n   if (this.user.login != null && this.user.senha != null) {\n    fetch(\"http://localhost:8080/users\", {\n     method: \"POST\",\n     body: JSON.stringify(this.user),\n     headers: {\n      Authorization: `Bearer ${AuthService.dados.token}`,\n      \"Content-Type\": \"application/json\",\n     },\n    })\n     .then((r) => {\n      if (r.status != 200 || r.status != 201) {\n       r.json().then((j) => {\n        console.log(\"ERRO\", j);\n       });\n      }\n      this.getUsuarios();\n     })\n     .catch((e) => {\n      console.log(\"ERRO\", e);\n     });\n   }\n  },\n  abreEdit(id) {\n   this.$router.push(`/usuarios/${id}`);\n  },\n },\n};\n</script>\n\n<style scoped>\ntable * {\n border: solid 1px black;\n}\n\ntable tbody tr {\n cursor: pointer;\n}\n\nfieldset {\n border: solid 1px blue;\n}\n\nfieldset input[type=\"text\"] {\n border: solid 1px blue;\n}\nfieldset input[type=\"password\"] {\n border: solid 1px blue;\n}\nfieldset button {\n border: solid 1px blue;\n}\n</style>"],"mappings":";AA+BA,OAAOA,cAAa,MAAO,iCAAiC;AAC5D,OAAOC,WAAU,MAAO,wBAAwB;AAEhD,eAAe;EACdC,UAAU,EAAE;IACXF;EACD,CAAC;EACDG,IAAIA,CAAA,EAAG;IACN,OAAO;MACNC,QAAQ,EAAE,EAAE;MACZC,IAAI,EAAE;QACLC,KAAK,EAAE,IAAI;QACXC,KAAK,EAAE;MACR;IACD,CAAC;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACTC,OAAO,CAACC,GAAG,CAACT,WAAW,CAACU,KAAK,CAACC,KAAK,CAAC;IACpC,IAAI,CAACC,WAAW,CAAC,CAAC;EACnB,CAAC;EACDC,OAAO,EAAE;IACR,MAAMD,WAAWA,CAAA,EAAG;MACnB,IAAI;QACH,IAAIE,CAAA,GAAI,MAAMC,KAAK,CAAC,6BAA6B,EAAE;UAClDC,MAAM,EAAE,KAAK;UACbC,OAAO,EAAE;YAAEC,aAAa,EAAG,UAASlB,WAAW,CAACU,KAAK,CAACC,KAAM;UAAE;QAC/D,CAAC,CAAC;QACFG,CAAC,CAACK,IAAI,CAAC,CAAC,CAACC,IAAI,CAAEC,CAAC,IAAK;UACpB,IAAI,CAAClB,QAAO,GAAIkB,CAAC;QAClB,CAAC,CAAC;MACH,EAAE,OAAOC,EAAE,EAAE;QACZd,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEa,EAAE,CAAC;MACxB;IACD,CAAC;IACD,MAAMC,MAAMA,CAAA,EAAG;MACd,IAAI,CAACnB,IAAI,CAACoB,UAAS,GAAI,CAAC,WAAW,CAAC;MACpChB,OAAO,CAACC,GAAG,CAACgB,IAAI,CAACC,SAAS,CAAC,IAAI,CAACtB,IAAI,CAAC,CAAC;MACtC,IAAI,IAAI,CAACA,IAAI,CAACC,KAAI,IAAK,IAAG,IAAK,IAAI,CAACD,IAAI,CAACE,KAAI,IAAK,IAAI,EAAE;QACvDS,KAAK,CAAC,6BAA6B,EAAE;UACpCC,MAAM,EAAE,MAAM;UACdW,IAAI,EAAEF,IAAI,CAACC,SAAS,CAAC,IAAI,CAACtB,IAAI,CAAC;UAC/Ba,OAAO,EAAE;YACRC,aAAa,EAAG,UAASlB,WAAW,CAACU,KAAK,CAACC,KAAM,EAAC;YAClD,cAAc,EAAE;UACjB;QACD,CAAC,EACCS,IAAI,CAAEN,CAAC,IAAK;UACZ,IAAIA,CAAC,CAACc,MAAK,IAAK,GAAE,IAAKd,CAAC,CAACc,MAAK,IAAK,GAAG,EAAE;YACvCd,CAAC,CAACK,IAAI,CAAC,CAAC,CAACC,IAAI,CAAEC,CAAC,IAAK;cACpBb,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEY,CAAC,CAAC;YACvB,CAAC,CAAC;UACH;UACA,IAAI,CAACT,WAAW,CAAC,CAAC;QACnB,CAAC,EACAiB,KAAK,CAAEC,CAAC,IAAK;UACbtB,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEqB,CAAC,CAAC;QACvB,CAAC,CAAC;MACJ;IACD,CAAC;IACDC,QAAQA,CAACC,EAAE,EAAE;MACZ,IAAI,CAACC,OAAO,CAACC,IAAI,CAAE,aAAYF,EAAG,EAAC,CAAC;IACrC;EACD;AACD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}